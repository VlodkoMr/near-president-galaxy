(function(e){function t(t){for(var r,a,i=t[0],s=t[1],u=t[2],d=0,b=[];d<i.length;d++)a=i[d],Object.prototype.hasOwnProperty.call(c,a)&&c[a]&&b.push(c[a][0]),c[a]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);l&&l(t);while(b.length)b.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,i=1;i<n.length;i++){var s=n[i];0!==c[s]&&(r=!1)}r&&(o.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},c={app:0},o=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/near-voting/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=s;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1:function(e,t){},2:function(e,t){},"203b":function(e,t,n){"use strict";n("52f9")},3:function(e,t){},"52f9":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);var r=n("5530"),c=n("1da1"),o=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("96cf"),n("7a23")),a={class:"container"};function i(e,t,n,r,c,i){var s=Object(o["y"])("SignIn"),u=Object(o["y"])("NftList");return Object(o["t"])(),Object(o["h"])("div",a,[i.user?Object(o["g"])("",!0):(Object(o["t"])(),Object(o["f"])(s,{key:0})),i.user?(Object(o["t"])(),Object(o["f"])(u,{key:1})):Object(o["g"])("",!0)])}var s=Object(o["j"])('<section class="intro"> Welcome, Space Ranger! <br><p style="color:#FFF;font-size:70%;">Today, you can choose a new Emperor of the Galaxy!</p></section><section class="logo"><img src="/logo.png" alt=""></section><div id="board"><div id="content"><p id="title">More than 5000 years ago</p><p id="subtitle">Near Protocol become a part of our infrastructure, governance and financial system.</p><br><p style="text-align:center;"> Today YOU, as part of the Aurora spaceship can choose a new emperor for you and your nation! Make your choice by connecting your own account in Near Protocol. </p></div></div>',3),u={id:"last-screen"},l=Object(o["i"])("p",null,"Sign In using your Near Account:",-1);function d(e,t,n,r,c,a){return Object(o["t"])(),Object(o["h"])("div",null,[s,Object(o["i"])("div",u,[l,Object(o["i"])("button",{onClick:t[0]||(t[0]=function(e){return a.signIn()}),class:"btn btn-primary btn-lg",style:{padding:"10px 50px"}},"Sign In")])])}var b={name:"SignIn",methods:{signIn:function(){window.wallet.requestSignIn(window.nearConfig.contractName,"NEAR Galaxy President")}}},p=n("6b0d"),f=n.n(p);const w=f()(b,[["render",d]]);var g=w,h=(n("b0c0"),{class:"main-window"}),O={class:"mb-3 text-center"},j=Object(o["k"])("Space Ranger "),m={style:{color:"rgb(75, 213, 238)"}},v=Object(o["i"])("hr",null,null,-1),y=Object(o["i"])("h3",{class:"mt-3 mb-4 text-center",style:{color:"#FFFF82"}},"Select your Galaxy Emperor:",-1),x={key:0,class:"text-center"},k=Object(o["i"])("i",null,"*No Candidates",-1),I=[k],S={key:1,class:"text-center"},C={class:"text-right"},U=["disabled","onClick"],N={class:"text-right"},M={class:"text-secondary"},E={class:"text-center"};function R(e,t,n,r,c,a){return Object(o["t"])(),Object(o["h"])(o["a"],null,[Object(o["i"])("div",h,[Object(o["i"])("h1",O,[j,Object(o["i"])("b",m,Object(o["z"])(a.user.accountId),1)]),v,y,c.candidates.length?Object(o["g"])("",!0):(Object(o["t"])(),Object(o["h"])("div",x,I)),c.candidates.length?(Object(o["t"])(),Object(o["h"])("div",S,[(Object(o["t"])(!0),Object(o["h"])(o["a"],null,Object(o["w"])(c.candidates,(function(e){return Object(o["t"])(),Object(o["h"])("div",{key:e.id,class:"one-candidate"},[Object(o["i"])("div",C,Object(o["z"])(e.name),1),Object(o["i"])("div",null,[Object(o["i"])("button",{class:Object(o["q"])(["btn btn-outline-light",{selected:c.selected==e.id}]),disabled:c.selected,onClick:function(t){return a.vote(e.id)}},"VOTE ",10,U)]),Object(o["i"])("div",N,[Object(o["i"])("small",M,"Total Votes: "+Object(o["z"])(e.totalVotes),1)])])})),128))])):Object(o["g"])("",!0)]),Object(o["i"])("div",E,[a.user?(Object(o["t"])(),Object(o["h"])("button",{key:0,class:"btn btn-outline-secondary sign-out",onClick:t[0]||(t[0]=function(e){return a.signOut()})},"SIGN OUT")):Object(o["g"])("",!0)])],64)}n("ac1f"),n("5319"),n("d3b7"),n("159b"),n("b64b");var _={name:"NftList",computed:{user:function(){return window.currentUser}},data:function(){return{candidates:[],ready:!1,selected:""}},created:function(){this.loadCandidates(),this.selected=localStorage.getItem("selected-".concat(window.currentUser.accountId))},methods:{signOut:function(){window.wallet.signOut(),window.location.replace(window.location.origin+window.location.pathname)},loadCandidates:function(){var e=this;window.contract.allCandidates({account_id:window.currentUser.accountId,from_index:"0",limit:20}).then((function(t){e.candidates=[],Object.keys(t).forEach((function(n){e.candidates.push(t[n])})),e.ready=!0}))},vote:function(e){return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=localStorage.getItem("selected-".concat(window.currentUser.accountId)),n||localStorage.setItem("selected-".concat(window.currentUser.accountId),e),window.contract.vote({id:e}).then((function(e){console.log(e)}));case 3:case"end":return t.stop()}}),t)})))()}}};n("80df");const A=f()(_,[["render",R]]);var P=A,T={name:"App",computed:{user:function(){return window.currentUser}},components:{SignIn:g,NftList:P}};n("203b");const F=f()(T,[["render",i]]);var L=F,z=n("db49"),G=n.n(z),V=n("d9eb"),W=(n("6ac6"),n("2373"));n("f9e3");function q(){return B.apply(this,arguments)}function B(){return B=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,n,c,o,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=G()("production"),e.next=3,V["connect"](Object(r["a"])({deps:{keyStore:new V["keyStores"].BrowserLocalStorageKeyStore}},t));case 3:if(n=e.sent,c=new V["WalletConnection"](n),!c.getAccountId()){e.next=11;break}return e.t0=c.getAccountId(),e.next=9,c.account().state();case 9:e.t1=e.sent.amount,o={accountId:e.t0,balance:e.t1};case 11:return e.next=13,new V["Contract"](c.account(),t.contractName,{viewMethods:["allCandidates"],changeMethods:["vote"],sender:c.getAccountId()});case 13:return a=e.sent,e.abrupt("return",{contract:a,currentUser:o,nearConfig:t,walletConnection:c});case 15:case"end":return e.stop()}}),e)}))),B.apply(this,arguments)}q().then(function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var n,r,c,a,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(s=function(){var e=window.innerWidth,t=window.innerHeight,n=Math.floor(Math.random()*t),r=Math.floor(Math.random()*e);return[n,r]},window.contract=t.contract,window.currentUser=t.currentUser,window.nearConfig=t.nearConfig,window.wallet=t.walletConnection,n=Object(o["e"])(L),n.use(W["a"],{teleportTarget:"#modals"}),n.mount("#app"),r=200,c=0;c<r;c++)a=document.createElement("div"),a.className="star",i=s(),a.style.top=i[0]+"px",a.style.left=i[1]+"px",document.body.append(a);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},"80df":function(e,t,n){"use strict";n("b007")},b007:function(e,t,n){},db49:function(e,t){var n=Object({NODE_ENV:"production",BASE_URL:"/near-voting/"}).CONTRACT_NAME||"president.vlodkow.testnet";function r(e){switch(e){case"mainnet":return{networkId:"mainnet",nodeUrl:"https://rpc.mainnet.near.org",contractName:n,walletUrl:"https://wallet.near.org",helperUrl:"https://helper.mainnet.near.org"};case"production":case"development":case"testnet":return{networkId:"testnet",nodeUrl:"https://rpc.testnet.near.org",contractName:n,walletUrl:"https://wallet.testnet.near.org",helperUrl:"https://helper.testnet.near.org"};default:throw Error("Unconfigured environment '".concat(e,"'. Can be configured in src/config.js."))}}e.exports=r}});
//# sourceMappingURL=app.511f43a5.js.map