(function(t){function e(e){for(var c,o,i=e[0],d=e[1],s=e[2],l=0,b=[];l<i.length;l++)o=i[l],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&b.push(r[o][0]),r[o]=0;for(c in d)Object.prototype.hasOwnProperty.call(d,c)&&(t[c]=d[c]);u&&u(e);while(b.length)b.shift()();return a.push.apply(a,s||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],c=!0,i=1;i<n.length;i++){var d=n[i];0!==r[d]&&(c=!1)}c&&(a.splice(e--,1),t=o(o.s=n[0]))}return t}var c={},r={app:0},a=[];function o(e){if(c[e])return c[e].exports;var n=c[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=c,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var c in t)o.d(n,c,function(e){return t[e]}.bind(null,c));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/near-president-galaxy/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],d=i.push.bind(i);i.push=e,i=i.slice();for(var s=0;s<i.length;s++)e(i[s]);var u=d;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0dc2":function(t,e,n){},1:function(t,e){},2:function(t,e){},"203b":function(t,e,n){"use strict";n("52f9")},3:function(t,e){},"415c":function(t,e,n){"use strict";n("0dc2")},"52f9":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);var c=n("5530"),r=n("1da1"),a=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("96cf"),n("7a23")),o={class:"container"};function i(t,e,n,c,r,i){var d=Object(a["y"])("SignIn"),s=Object(a["y"])("NftList");return Object(a["t"])(),Object(a["h"])("div",o,[i.user?Object(a["g"])("",!0):(Object(a["t"])(),Object(a["f"])(d,{key:0})),i.user?(Object(a["t"])(),Object(a["f"])(s,{key:1})):Object(a["g"])("",!0)])}var d=Object(a["j"])('<section class="intro"> Welcome, Space Ranger! <br><p style="color:#FFF;font-size:70%;">Today, you can choose a new Emperor of the Galaxy!</p></section><section class="logo"><img src="/logo.png" alt=""></section><div id="board"><div id="content"><p id="title">More than 5000 years ago</p><p id="subtitle">Near Protocol become a part of our infrastructure, governance and financial system.</p><br><p style="text-align:center;"> Today YOU, as part of the Aurora spaceship can choose a new emperor for you and your nation! Make your choice by connecting your own account in Near Protocol. </p></div></div>',3),s={id:"last-screen"},u=Object(a["i"])("p",null,"Sign In using your Near Account:",-1);function l(t,e,n,c,r,o){return Object(a["t"])(),Object(a["h"])("div",null,[d,Object(a["i"])("div",s,[u,Object(a["i"])("button",{onClick:e[0]||(e[0]=function(t){return o.signIn()}),class:"btn btn-primary btn-lg",style:{padding:"10px 50px"}},"Sign In")])])}var b={name:"SignIn",methods:{signIn:function(){window.wallet.requestSignIn(window.nearConfig.contractName,"NEAR Galaxy President")}}},p=n("6b0d"),f=n.n(p);const h=f()(b,[["render",l]]);var O=h,g=(n("b0c0"),{class:"main-window"}),j={class:"mb-3 text-center"},w=Object(a["k"])("Space Ranger "),m={style:{color:"rgb(75, 213, 238)"}},y=Object(a["i"])("hr",null,null,-1),v={key:0},x=Object(a["i"])("h3",{class:"mt-3 mb-4 text-center",style:{color:"#FFFF82"}},"Select your Galaxy Emperor:",-1),C={key:0,class:"text-center"},k=Object(a["i"])("i",null,"*No Candidates",-1),S=[k],N={key:1,class:"text-center"},I={class:"text-right"},A=["onClick"],U={class:"text-right"},E={class:"text-secondary"},M={key:1},R={style:{width:"442px",margin:"auto"}},T={key:0},_={class:"btn-group mt-4 mb-4"},P={key:1,class:"mt-4 mb-4 text-center"},F=Object(a["i"])("b",null,"Candidate Successfully Added!",-1),D=[F],G={class:"text-center"};function L(t,e,n,c,r,o){return Object(a["t"])(),Object(a["h"])(a["a"],null,[Object(a["i"])("div",g,[Object(a["i"])("h1",j,[w,Object(a["i"])("b",m,Object(a["z"])(o.user.accountId),1)]),y,r.addCandidate?Object(a["g"])("",!0):(Object(a["t"])(),Object(a["h"])("section",v,[x,r.candidates.length?Object(a["g"])("",!0):(Object(a["t"])(),Object(a["h"])("div",C,S)),r.candidates.length?(Object(a["t"])(),Object(a["h"])("div",N,[(Object(a["t"])(!0),Object(a["h"])(a["a"],null,Object(a["w"])(r.candidates,(function(t){return Object(a["t"])(),Object(a["h"])("div",{key:t.id,class:"one-candidate"},[Object(a["i"])("div",I,Object(a["z"])(t.name),1),Object(a["i"])("div",null,[Object(a["i"])("button",{class:Object(a["q"])(["btn btn-outline-light",{selected:o.isSelected(t.id)}]),onClick:function(e){return o.vote(t.id)}},"VOTE ",10,A)]),Object(a["i"])("div",U,[Object(a["i"])("small",E,"Total Votes: "+Object(a["z"])(t.totalVotes),1)])])})),128))])):Object(a["g"])("",!0)])),r.addCandidate?(Object(a["t"])(),Object(a["h"])("section",M,[Object(a["i"])("div",R,[r.candidateAdded?Object(a["g"])("",!0):(Object(a["t"])(),Object(a["h"])("div",T,[Object(a["i"])("div",_,[Object(a["G"])(Object(a["i"])("input",{type:"text",class:"form-control",placeholder:"Candidate Name",maxlength:"30","onUpdate:modelValue":e[0]||(e[0]=function(t){return r.candidateName=t}),style:{width:"300px",padding:"10px"}},null,512),[[a["C"],r.candidateName]]),Object(a["i"])("button",{class:"btn btn-primary",style:{width:"142px"},onClick:e[1]||(e[1]=function(t){return o.addRun()})},"Add Candidate")]),Object(a["i"])("button",{onClick:e[2]||(e[2]=function(t){return r.addCandidate=!1}),class:"btn btn-link"},"Â« back")])),r.candidateAdded?(Object(a["t"])(),Object(a["h"])("div",P,D)):Object(a["g"])("",!0)])])):Object(a["g"])("",!0)]),Object(a["i"])("div",G,[r.addCandidate?Object(a["g"])("",!0):(Object(a["t"])(),Object(a["h"])("button",{key:0,class:"btn btn-outline-primary",style:{"margin-right":"30px"},onClick:e[3]||(e[3]=function(t){return o.addCandidateShow()})},"ADD MY CANDIDATE ")),o.user?(Object(a["t"])(),Object(a["h"])("button",{key:1,class:"btn btn-outline-secondary sign-out",onClick:e[4]||(e[4]=function(t){return o.signOut()})},"SIGN OUT")):Object(a["g"])("",!0)])],64)}n("ac1f"),n("5319"),n("1276"),n("d3b7"),n("159b"),n("b64b"),n("e9c4");var V={name:"NftList",computed:{user:function(){return window.currentUser}},data:function(){return{candidates:[],ready:!1,addCandidate:!1,candidateAdded:!1,selected:[],candidateName:""}},created:function(){this.loadCandidates();var t="selected-".concat(window.currentUser.accountId);localStorage.getItem(t)&&(this.selected=JSON.parse(localStorage.getItem(t)))},methods:{signOut:function(){window.wallet.signOut(),window.location.replace(window.location.origin+window.location.pathname)},isSelected:function(t){if(this.selected.length)return-1!=this.selected.indexOf(t)},addCandidateShow:function(){this.addCandidate=!0},addRun:function(){var t=this;window.contract.addCandidate({name:this.candidateName}).then((function(){t.candidateAdded=!0,t.loadCandidates(),setTimeout((function(){t.candidateAdded=!1,t.addCandidate=!1}),3e3)})).catch((function(t){var e=t.kind.ExecutionError.split(", filename");alert(e[0])}))},loadCandidates:function(){var t=this;window.contract.allCandidates({account_id:window.currentUser.accountId,from_index:"0",limit:20}).then((function(e){t.candidates=[],Object.keys(e).forEach((function(n){t.candidates.push(e[n])})),t.ready=!0}))},vote:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.selected.push(t),localStorage.setItem("selected-".concat(window.currentUser.accountId),JSON.stringify(e.selected)),window.contract.vote({id:t}).then((function(t){console.log(t),e.loadCandidates()})).catch((function(t){var e=t.kind.ExecutionError.split(", filename");alert(e[0])}));case 3:case"end":return n.stop()}}),n)})))()}}};n("415c");const z=f()(V,[["render",L]]);var J=z,W={name:"App",computed:{user:function(){return window.currentUser}},components:{SignIn:O,NftList:J}};n("203b");const q=f()(W,[["render",i]]);var B=q,Y=n("db49"),H=n.n(Y),K=n("d9eb"),Q=(n("6ac6"),n("2373"));n("f9e3");function X(){return Z.apply(this,arguments)}function Z(){return Z=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,n,r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=H()("production"),t.next=3,K["connect"](Object(c["a"])({deps:{keyStore:new K["keyStores"].BrowserLocalStorageKeyStore}},e));case 3:if(n=t.sent,r=new K["WalletConnection"](n),!r.getAccountId()){t.next=11;break}return t.t0=r.getAccountId(),t.next=9,r.account().state();case 9:t.t1=t.sent.amount,a={accountId:t.t0,balance:t.t1};case 11:return t.next=13,new K["Contract"](r.account(),e.contractName,{viewMethods:["allCandidates"],changeMethods:["vote","addCandidate"],sender:r.getAccountId()});case 13:return o=t.sent,t.abrupt("return",{contract:o,currentUser:a,nearConfig:e,walletConnection:r});case 15:case"end":return t.stop()}}),t)}))),Z.apply(this,arguments)}X().then(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var n,c,r,o,i,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(d=function(){var t=window.innerWidth,e=window.innerHeight,n=Math.floor(Math.random()*e),c=Math.floor(Math.random()*t);return[n,c]},window.contract=e.contract,window.currentUser=e.currentUser,window.nearConfig=e.nearConfig,window.wallet=e.walletConnection,n=Object(a["e"])(B),n.use(Q["a"],{teleportTarget:"#modals"}),n.mount("#app"),c=200,r=0;r<c;r++)o=document.createElement("div"),o.className="star",i=d(),o.style.top=i[0]+"px",o.style.left=i[1]+"px",document.body.append(o);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},db49:function(t,e){var n=Object({NODE_ENV:"production",BASE_URL:"/near-president-galaxy/"}).CONTRACT_NAME||"president.vlodkow.testnet";function c(t){switch(t){case"mainnet":return{networkId:"mainnet",nodeUrl:"https://rpc.mainnet.near.org",contractName:n,walletUrl:"https://wallet.near.org",helperUrl:"https://helper.mainnet.near.org"};case"production":case"development":case"testnet":return{networkId:"testnet",nodeUrl:"https://rpc.testnet.near.org",contractName:n,walletUrl:"https://wallet.testnet.near.org",helperUrl:"https://helper.testnet.near.org"};default:throw Error("Unconfigured environment '".concat(t,"'. Can be configured in src/config.js."))}}t.exports=c}});
//# sourceMappingURL=app.a9656660.js.map